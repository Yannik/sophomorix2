#!/usr/bin/perl -w
# Dieses Script (sophomorix-minitest) wurde von Rüdiger Beck erstellt
# Es ist freie Software
# Bei Fehlern wenden Sie sich bitte an mich.
# jeffbeck@web.de  oder  jeffbeck@gmx.de

# Dieses Script ist NICHT im Paket sophomorix-developer enthalten



# Bibliotheken
use strict;
use Getopt::Long;
use Sophomorix::SophomorixConfig;
use Sophomorix::SophomorixBase;
use Sophomorix::SophomorixAPI;
#use Sophomorix::SophomorixFiles;
use Sophomorix::SophomorixPgLdap;
use Sophomorix::SophomorixTest;
use Test::More "no_plan";
Getopt::Long::Configure ("bundling");

use DBI;
use Crypt::SmbHash;
use Net::LDAP;
#use DebAux::Debconf;

# Einlesen der Konfigurationsdatei für Entwickler
#{ package DevelConf ; do "/etc/sophomorix/devel/user/sophomorix-devel.conf"}


system("install -d /root/sophomorix-test");

############################################################
# Start
############################################################

$Conf::log_level=1;







my $workstationhome="/home/workstations";
my $room1="134a";
my $room2="717b";


my @hostnames1=("pc1","pc2","pc3","pc4");
my @hostnames2=("Rechner1","Rechner2","Rechner3","Rechner4",
                "Rechner5","Rechner6","Rechner7","Rechner8");

system("smbldap-groupadd -a $room1");
system("smbldap-groupadd -a $room2");

system("mkdir -p $workstationhome/$room1");
system("mkdir -p $workstationhome/$room2");

foreach my $hostname (@hostnames1){
    print "Adding $hostname to $room1\n";
    my $command=
       "smbldap-useradd -a -d $workstationhome/$room1/$hostname".
       " -c 'workstation account' -g $room1 -m -s /bin/false $hostname";
    #print "$command\n";
   system("$command");
}

foreach my $hostname (@hostnames2){
    print "Adding $hostname to $room2\n";
    my $command=
       "smbldap-useradd -a -d $workstationhome/$room2/$hostname".
       " -c 'workstation account' -g $room2 -m -s /bin/false $hostname";
    #print "$command\n";
    system("$command");
}


