This is the todo/changelog for the sophomorix sourcecode

############################################################
Todo
############################################################

packaging:
Makefile create directories in correct permissions, 
how can i package this directories with its permissions?




sophomorix-repair 
   - use function create_userlist to specify users
   - update man page


sophomorix-quota
   --check option --noninteractive 
   - option --auto-setup
       makes a usable quota-system
       does what it needs to have quota enabled and working
   - option --sum still missing
   - option --school(=pupil, teacher, workstation)
     Use this option in sophomorix-passwd also?
       -> include in function create_userlist


sophomorix-teach-in (seems ok so far)


sophomorix-check
   - check what happens when a wish-login in lehrer.txt is given twice
     - > generate proper error message
   - what about the shell (/bin/bash) when updating from old files?
   - what about the quota  when updating from old files?
       lehrer.txt: automatically used, when copied
       quota.txt:  automatically used, when copied
       projects:   did not exist, ok
       classes:    schulinfo.txt should be copied/used to class_db
             --> check this
   - add more auto-teach-in
      - exchange of firstname and lastname should be detected automatically
   - filter out users in schueler.txt that have groupname "lehrer" or "teacher"
     for security reasons
   - add use of field 6, upload Field 6 Data automatically into database
      - add entry for every user in user_db: "Department"
      - for every department create entry in department_db
      department_ contains:
         - Name of department i.e. "Hauptschule"
         - Name String, i.e. "HS Sydney", which is used by printing things.
         - Mail suffix, i.e "hs-sydney.de" -> user@hs-sydney.de
         - short name, i.e. "hss"
         - automatisch: Schülerzahl, Klassenzahl ?????? oder besser dynamisch
         - ....
          

sophomorix-add
   - create new users with quota
   - add call sophomorix-quota --noninteractive


sophomorix-move
   - remove option --klassenintern ()


sophomorix-kill
   - when a user is deleted, move its line(s) from user-modify.log to 
     user-modify-archive (speed up lookups in user-modify.log)
   - add a kill-entry to the archive to know when a user was killed.
   - history in archive is not dorted according date, is sorted accordin users
     (is this fine?)


sophomorix-user 
   - wenn user is reactivated, then add her automatically in her ExitAdminClass, 
     if she is in dachboden 
     or in the class specified by  -c class option
   - option --move moves a pupil at once in the new class 
     i.e. (calls sophomorix-move -l loginname)
   - user with status U,E must not be reactivated?
   - option -i : shows all users (should be used with | less)
   - option --reactivatable (or -i -D -T shows info about Disabled snd Tolerated)


sophomorix-split
   - check if exchange dir is created
   -check if links are created to exchange dir
   - create commands with only the changes of users to apply. 
     ( like in sophomorix-project, use the same code?)
   - sophomorix-split options: 
        split randomly in 2,3 halves
        split half-half
        split a class into projects(is this necessary?)
   - rename database subclasses to subclass_db
   - add some show info stuff
   - add change long name of subclass


sophomorix-passwd
   - generate login-cards with changed passwords automatically
     (passwd_change.pdf)

sophomorix-print

   - print subclass on login-card?
   - what about projects, show project membership?
   - make configurable which print-output sophomorix-print generates 
     to save time (ps, pdf,csv,...) 
   

sophomorix-project
   - create exchange directories automatically, when the project is created
   - option -p astro -i should display info about group astro (6users in a row, ...)
   - add status stuff to projects
      P= Permanent, will not be automatically removed
      ... see drawing in doku
      when a project is disabled:
       - no data exchange
       - no database access, ...
       - mail to project teacher
       - delete after xxx days (cron-job)

   - when killing a project: 
       - delete line
       - delete exchange dir
       - delete links from users to exchange dir
       - move data back to homedir of user?
   - check if loginname is valid before adding user to a project   


sophomorix-class
   - show classes in alphabetical order (use list insted of hash, when fetching)   
   - class_db:
     Type:
       A: AdminClass (creted by schueler.txt entries)
       X: ExtraClass (created by extrakurse.txt)
       K: Killable (no users in this class anymore, can be killed)
   --kill  remove a class from database,
           delete the exchange directory
           ...


sophomorix-test
   - include reactivation by sophomrix-user -A
  

sophomorix-vampire:

     problem: id of lehrer on debian is 105 ml 2.x is 1002
       -- workaround
          0. install sophomorix2
          1. groupdel lehrer (removes 105), works only when no teacher exists
             - group lehrer should be added with the correct value, because when 
             pupil is added, chown
             (or: add lehrer first, then pupils)
              expects group lehrer to exist.
          2. sophomorix-setup (repairs directories with groupowner lehrer)
          3. update (lehrer with old id will be created automatically)
   - backup /etc to /etc/sophomorix-vampire
   - move homes
   - move mail
   - move shares
   - invent k option, used as in sophomorix-check(necessary?)



sophomorix-tuition??
   - write new script to distribute data, collect data, ...


Functions in SophomorixBase:
   - rename: append_auto_teach_in_log --> append_teach_in_log
   - Put Quota-functions in SophomorixQuota.pm 


All Scripts:
   - creating database file from sophomorix-setup-files??
       removing it from sophomorix-check??
   - remove old stuff: ${schueler_oder_user}.protokoll";
   - remove database/sys dependant code
   - set/check file-permissions at the and of each sophomorix-* run. 
   - shorter verbosity when no verbosity option is given
   - remove old subclass stuff (extrafile to specify subclass)
   - get_xxx functions of sophomorix-repair: give a international name 
     and put it to SophomorixAPI, document it with perldoc 
   - unify the options for all scripts (create rfc), where a common
     naming system is used, i.e what options are used to refer to a AdminClass:
         -c AdminClass --class AdminClass --adminclass AdminClass
         ...
   - add references to all other man pages in every man-page


============================================================
Think about:
============================================================

   - think about getting user in class lists from the database
     for correction of exams, ...
   - think about lehrer.txt handling
   think about ext-lehrer (teacher fo only one class).
     probably needed for vhs-Kurse, etc., ...
   - think about: when a teacher adds/removes herself to a class, 
     add/remove her to a field in class_db
   - think about acl's and their handling in repair-directory
   - think about self adding of users
   - think about grpquota in projects
   - think about manually moving pupils in other classes
      - restrict manually moving to Permanent,Frozen?
      - manually create classes for Permanent
        or automatically create a class permanent, where all Permanent/Frozen users 
        a moved to?
        do they have an exchange directory?
   - think about file-locking (use DBD:CSV - module)
   - Think about removing ALL files of a user when she is deleted
     (find /home/share ... and kill them)
     think about renaming every file in an exchange-directory
     of a user that wil be killed shortly to
       filename.txt   -> will_be_deleted_filename.txt
   - group problems: which group should be primary group
   - easy to hook in prefilter-scripts, that are run automatically
   - create multiple project_db files ???
       1. automatically created projects:  department-spanning
       2. manually created projects by root
       3. Projects created by teachers

Administration software:
   schueler.txt:    class;lastname;firstname;birthday;unid;department;
   lehrer.txt:    class;lastname;firstname;birthday;wish-loginname

Software Vendors:
   - SPLAN
   - IBIS
   - LUSD (mandatory in Hessen, Germany)
   - Schulkartei







############################################################
RELEASES:
############################################################


1.2.0 (2005-02-?)
   - first uncomplete sophomorix-vampire verion
     - distributed in package sophomorix-vampire
     - pushing a key and fetching files

   - Fixed Bug where sophomorix-print generated files in the directory 
     in wich it was called. This made the script abort without producing an error,
     when executed in a nfs mounted read-only filesystem.

   - sophomorix-user -s username
     added options zo the underlying quota command to
       - not show remote filesystems
       - show also unused filesystems

   - rename print-data 
        hinzu.*  -> add.* and others

   - made the database names comply with DBI (sql database table names 
     cannot have a point in them)
     i.e.  user.protokoll -> user_db
           projects.db    -> projects_db
           class.db       -> class_db
           subclasses     -> subclasses_db

   - made the directories under /var/lib/sophomorix international (names)
     i.e.:
      drucken   -> print-data
      pruefen   -> tmp  (because it is created on each run of sophomorix-check)
      dynconfig -> database
      ergebnis  -> check-result
     
   - added new script sophomorix-class and man page: 
      - -i shows all classes with info
      - --class classname --quota 200+20  sets the quota in database

   - function zeit_stempel: made easier(use ticks), instead of first 
                            writing to a tmp-file and rereading

   - renamed schulinfo.txt to class.db and moved it to the database files
     (renamed again later, see above)     

   - Bugfixes to sophomorix-project: 
         - Don't create links to root
         - Don't add root to unix-group of project

   - complete rewrite of sophomorix-quota to acommodate AddQuota of projects
     (option --sum still missing)
     Quotastring syntax simplified to gain speed:  i.e. 23+45
     (minus sign (-) or x is NOT SUPPORTED ANYMORE)

   - limit sophomorix-quota to (option names as in sophomotix-add) 
       - class(-c), 
       - login ...
       - room
       - ...

   - new function create_userlist($login,$class,$room, ...)
          function can be used in:
               - sophomorix-passwd
               - sophomorix-quota

   - replaced /home/schueler, ... with variables in sophomorix-quota

   - new command sophomorix-passwd (for root)
      - new passwords for all teacher, pupils
      - new password for classes, rooms
      - single users

   - moved all query function of sophomorix-repair to SophomorixAPI and 
     renaming them international

   - added a switch (--no-sync) in sophomorix-check to do/do not an auto-teach-in

   - replacement for sophomorix-teach-in finished

   - show login, admin-class and exit-admin-class when teaching-in

   - include/check new script sophomorix-repair

   - removed variable $samba_dir in repair.directories, ...(not used anymore)

   - The Filesystem under /home is controlled by variables in sophomorix-devel.conf
     repair.directories uses this variable to identify permissions

   - added a few directories under /home/samba

   - sophomorix-setup uses repair.directories to get permissions of directories

   - sophomorix-check with option get-info-from-old-files, that uses data from 
     a previous installation to add users with a former id, gid and login name.

   - option no-kclass disbles removing k from classnames in old group

1.1.6 (2005-01-21)

   - A lot of Bugfixes 



1.1.5 (2005-01-18)

   - First tagged release in the cvs














