# $Id$

############################################################
Problems
############################################################


cups-pdf: not necessary for Administrator (not a user account)

Other Questions
- problems: a teacher cann fill the HD space easily with 
  handing out lots of data



############################################################
KNOWN BUGS
############################################################
BUG: a user in dachboden is reactivated by a similar
     (=must be identical) new user

BUG: 
ps2pdf cuts away the footer when sophomorix-print is running




############################################################
DOKUMENTATION To do
############################################################

dokumentation:
   * grafik workflow aktualisieren
   * write how to test sophomorix
      - sophomorix2
      - sophomorix-doc-html
      - perldoc Sophomorix::SophpmorixAPI
   * logging   


############################################################
PACKAGING for DEBIAN To do
############################################################

packaging:
   - Makefile creates directories with correct permissions, 
     how can I package this directories with its permissions?
   - sophomorix-vampire version x.x braucht sophomorix2 1.2.2
     (das steht in den abhängigkeiten), falls es installiert werden soll (optional)
     andersherum braucht sophomorix-vampire dieselbe Versionsnummer von sophomorix2 
     wie macht man das?
   - optionen in postinst-scripten upgrade)



############################################################
MAKING a Package
############################################################

1. update versions in debian/control
   (so that apt-get update sophomorix2 updates all sophomorix-* packages)

2. update date of release in changelog-sophomorix-src

3. cd cvs/sophomorix2

4. dch -i 
   add a comment to the changelog

5. make deb  (old: dpkg-buildpackage -rfakeroot)

6. Tag all files in the cvs repository with the tag 'Version-x-y-z'



############################################################
MODIFY directries when user is created or repaired
############################################################

1. To make it possible to rename such a dir:
   add variables in sophomorix-lang.de, ...
2. SophomorixBase has a function provide user files:
     A) decide if teacher or student
     B) create a setup_verzeichnis entry
3. create an entry in repair.directories with permissions, 
   owners and groupowners
4. To make sophomorix-repair replce the placeholders
   in repair.directories:
   - insert replacement string in function repair_directories

(If unsure where to find tho correct place in the scripts, 
 grep for 'handout')



############################################################
SCRIPTS To do
############################################################

sophomorix-repair
   - use function create_userlist to specify users
     Call with option -u user should be fast (= do only this)

sophomorix-quota
   * option --sum still missing
   - check if quota is really set (how?, grep through 'quota user' ?)
   - find users without quota, report them (cron)


sophomorix-teach-in (seems ok so far)


sophomorix-check
   - what about the shell (/bin/bash) when updating from old files?
   - what about the quota  when updating from old files?
       lehrer.txt: automatically used, when copied
       quota.txt:  automatically used, when copied
       projects:   did not exist, ok
       classes:    schulinfo.txt should be copied/used to class_db
             --> check this
   - add more auto-teach-in
      - exchange of firstname and lastname should be detected automatically
   * filter out users in schueler.txt that have groupname "lehrer" or "teacher"
     for security reasons
   - add use of field 6, upload Field 6 Data automatically into database
      - add entry for every user in user_db: "Department"
      - for every department create entry in the postgres database
      department_ contains:
         - Name of department i.e. "Hauptschule"
         - Name String, i.e. "HS Sydney", which is used by printing things.
         - Mail suffix, i.e "hs-sydney.de" -> user@hs-sydney.de
         - short name, i.e. "hss"
         - automatisch: Schülerzahl, Klassenzahl ?????? oder besser dynamisch
         - ....
   - Format report.office with latex          
   - throw error, when unid is double in schueler.txt 


sophomorix-add
   - add standard linux GUI (kde3 (configurable))
     (sophomorix-user --copy-to-home filename --teacher, ...)

sophomorix-move
   - move Data from share into home, even if 'hidden' in another owners directory
   - quick-move of a user (move user with a command, and keep him somehow out of 
     way, when calling sophomorix-move)


sophomorix-kill


sophomorix-user 
   - wenn user is activated, then add her automatically in her ExitAdminClass, 
     if she is in dachboden 
       now, you still have to do -check and -move
     or in the class specified by  -c class option
   - Changing a state of a user (make Permanent, Killable, ...)
     by using function create_userlist, i.e. make all pupils killable
   - option --move moves a pupil at once in the new class 
     i.e. (calls sophomorix-move -u user)
   - user with status U,E must not be activated?
   - option --activatable (or -i -D -T shows info about Disabled or Tolerated users)
   - when reactivating a user, set a date in the future to keep her longer acctive 
     (optional parameter, configurable)
   - option --clean-account: remove all data from the account, without removing
     the account, password, ... itself (useful for guest accounts)
   - option --newest shows/modifies users added on the latest day/latest run
   - group display: separate primary groups from secondary (more logical) or not 
                    (like id -nG user) 

   - create lists of users (move to sophomorix-print)
       - one or more classes, projects, ... or the whole school
       - csv,xls,pdf, ....


sophomorix-split
   - sophomorix-split options: 
        split randomly in 2,3 parts
        split a class into projects(is this necessary?)


sophomorix-passwd
   - generate login-cards with changed passwords automatically
     (passwd_change.pdf)
   - make this an option to sophomorix-user


sophomorix-print
   - print subclass on login-card?
   - option --project to print login cards for members of projects
   - what about projects, show project membership?
   - put school-logo on login-card, watermark, ...
   - generate a onepage-printout for teachers (help, mail, webmin-login, ...)
   - root can allow teachers to move his students in a special permanent class
     i.e. to allow some of its students to participate in a wiki permanently
     admin should be able to define an 'veteran project', i.e. 
     m4kb2t --> mkb-veterans
   - allow other than [a-z0-9_] in strings that is used for latex


sophomorix-project
   - ML 3.0: allow open projects only (--join)
   - add status stuff/lifetime stuff to projects
      P= Permanent, will not be automatically removed
      ... see drawing in doku
      when a project is disabled:
       - no data exchange
       - no database access, ...
       - mail to project teacher
       - delete after xxx days (cron-job)
   - when killing a project: 
       - delete line
       - delete exchange dir
       - delete links from users to exchange dir
       - move data back to homedir of user?

   - allow teachers to add a project (if no addquota is involved)
     - (maximum of Projects is configurable for each teacher: standard 30)
     - standard final date: one year from now or schoolyears end (if configured)
     - maximum length is 3 years
     - extension of length is possible
     - deleten of a project is only possible as the creator (-> field in database) 

   - allow admin:
     - projects with additional quota
     - permanent projects
     - delete a project at once
     - push a project into the deletion cycle (send mail,deactivate,autom. deletion)
     

sophomorix-class
   - count users in classes, display with -i
     show total of clases with users / without users
   - if no class is found,-> message
   --kill  remove a class from database,
           delete the exchange directory
           ...


sophomorix-test
   - include testing the log file.
      - log in different file while testing
      - check this file for correctness
      - remove this file


sophomorix-test-bunchofusers
   - option --exam (distribute, collect, exams)
   - option --split (split a class)
   - option --project (create a project, check members, exam, ...)
   - choose uncommon loginnames/groupnames so that it can be 
     run on a working system
   - interrupt *-bunchofusers before doing anything 
     when loginnames that are to be created are present already

sophomorix-vampire:
   * create config-files (perl-syntax):
       - list of files with abs-path to get them from old server
       - file with /path/on/old/server::/path/on/new/server
         sync them automatically

       - /usr/local/samba/progs  -> /home/samba/progs
       - /usr/local/samba/cds    -> /home/samba/cds
       - /usr/local/httpdocs     -> /var/www

   * backup /etc to /etc/sophomorix-vampire
   * backup old login scripts

   * move mail
     .forward wird vom smpt-server ausgewertet (sendmail,postfix) und sollte 
     auch auf ml3 tun
     (.forward auswerten in sieve einrichten. /var/lib/cyrus/Mail ...)

     neuer server mit laufendem cyrus-server, dann aus /var/spool/mail/user
     mit cyrdeliver zuschicken

     siehe: http://cyrusimap.web.cmu.edu/twiki/bin/view/Cyrus/MboxCyrusMigration

     von cyrus auf cyrus: imapsync


   - move shares
   - option for k necessary?

   - generate a log file what went wrong

   - detect if a non-teacher user has a webmin-login (write to log-file)

   - read passwords from /etc/shadow and /etc/smbpasswd
     - push them into the new accounts
       password-encrypting
       suse:   ?
       debian: md5

   - strategie for rembo:

     garbage that should not be taken to a new system

     images:
     /var/lib/myshn  /usr/local/rembo/files/global/myshn/groups
                                                         hosts
                                                         users
                                                         hdimages
                                                         nicht die patch.*
                                                         Konfigurationsdateien
                                                         Nicht: bin
     rembo beenden
     /var/lib/rembo  /usr/local/rembo/files/shared

     rembo -chkshared zeigt die zu entfernenden an     
     
     konfigurationsdaten:
     rembo.conf
     /etc/myshn ist link

    Projektgruppen nach Anleitung T.Schnitt übernehmen



   
sophomorix-mail


sophomorix-teacher
   - read perlsec
   - distribute _Collect to one pupil
   - backups after rsync are temporarily owned by group 'lehrer', 
      because sophomorix does not run setgid root
     (this could cause problems, when using grpquotas (No problem now!))
   - think about copy/delete for rsync
   - how should it be managed to clear a  _Collect directory?
     (dont do this at all?)
   - when doing --(no)share, then dont do it for teachers


   --common naming with windows,novell ZEN:
     Naming:
       Menu: Klassenarbeiten
             Klassenarbeitsmodus (aktiviert=green, deaktiviert=red)
     - teachers aktivates modus
     - pc-based login (reason: limited gruppenrichtlinien, if used)
     - relogin is impossible
     - no internet   (make it choosable in linux-ml)
     - no exchange dir 
         - users can exchange on writeable programm share
           when bad software must be used thar requires write access
     - no mail
     - collect data in a special dir
          from _einsammeln
          to   _einsammeln/klasse/lehrer_datum_uhrzeit


     austeilen (homeverzeichnis): - cp data 
                - change the owner
                - 'save' button after editing
          from _austeilen/gruppe
               _austeilen/aktueller_raum

old:      to   _austeilen/klasse/lehrer_datum_uhrzeit/*files
better:   to   _austeilen/lehrer/*files

          _austeilen/klasse: files are missing, because they are moved

           (moved to _verteilt/klasse/lehrer_datum_uhrzeit)
       
     vorlagen (bereitstellen):
                - a class/project/subclass must be given  
                - use links to share data 
                - data is readonly  
                - 'save as ...' is necessary

     new features: - select data to distribute 
                     (different groups in one room, exams!)
                   - use empty or known password, 
                     loginscript changes password to arbitrary
                   - after login, student has to type in his name


sophomorix-end-of-year (new script)
   - remove content of share-directories
   - exclude classes of type extra


sophomorix-check --cron 
   - zip files in /var/log/sophomorix/exam


Functions in SophomorixBase:
   - code cleanup


############################################################
ALL SCRIPTS To do
############################################################

   - show quota values larger than 9999MB as GB
     9999 -> 10G  (what about accuracy?)
   - if a class is to be added and the groupname is given to a project already
     make something correct
   - remove global variable alle_verzeichnis_rechte
     (sophomorix-split needs return value, sophomorix-add not ???)
   - /home/share/tasks/dachboden is of no use?
   - remove compatibility-mode to ml 1.1.1
   - replace sperrklassen.txt and entfernklassen.txt with filter.txt
   - test csv-output on windows and linux
   - clear a user: (The same as clearing a workstation after the exam)
           - keep his login, passwd, homedir
           - keep entry in database
           - restore directories (sammelordner, ...)
           - restore permissions 
        but:
           - empty its home (with options)
           - delete all mail (with option)
           - delete all files in share dir (with options)
           - linux-dotfiles only (with options)

     (Status C = can be cleared, sophomorix-clear, ...)

   - read the config-files from thomas
     (file:  debconf datenbank, perl-lib zum auslesen benutzen ist dabei)
      - debconf-show linuxmuster-base
         zeigt alle werte von linuxmuster-base
      - echo get cupsys/raw-print | debconf-communicate | awk '{print $2}'
         (' ist shift-#)
         liest einzelne Werte aus

   * set/check file-permissions at the and of each sophomorix-* run. 
   - unify the options for all scripts (create rfc), where a common
     naming system is used, i.e what options are used to refer to a AdminClass:
         -c AdminClass --class AdminClass --adminclass AdminClass
         ...
   - add references to all other man pages in every man-page



############################################################
DATABASE To do
############################################################
Postgres:
   - dump old database, before doing anything
                 pg_dump ldap > file.sql


SQL-DBI/OpenLDAP related:

- Transaction: combine inserts in create_user_entry 
- Load DBI (use:DBI;) only if necessary
- update database: combine select and updates to transaction
- NextFreeUnidId beim update ausnehmen

- avoid inserting an identical,existing line once again
  --using SQL
  (SQL can't do that)



############################################################
LDAP To do
############################################################




############################################################
SAMBA To do
############################################################

Samba net Befehl ansehen




############################################################
IMAP To do
############################################################

imap:  call
system("su --command='mkmaildir' postgres")   ????????
 
check if dir exists /var/lib/cyrus  ??? kommt mit paket

paket: cyrus21-imapd




############################################################
MOODLE To do
############################################################




############################################################
Administration Software
############################################################

Administration software:
   schueler.txt:   class;lastname;firstname;birthday;unid;department;
   lehrer.txt:     class;lastname;firstname;birthday;wish-loginname

Software Vendors:
   - SPLAN
   - IBIS
   - LUSD (mandatory in Hessen, Germany)
   - Schulkartei




============================================================
============================================================
Think about:
============================================================
============================================================
   - tar.gz-ing /var/www/people when deleting a user
     (for teachers only)
   - cups 
   - moodle (add users to classes, add teachers to admins)
   - deleting /home/exams
   - log password changes securely
   - create loginnames initial.name.birthday
     (what about changes to this data)
   - sophomorix-info for ALL users (show my account data)
   - make standard-passwort linux configurable
   - commands for every user (sophomorix-show-my account, ...)
   - quick-self-add-mode
   - Mail notification for events (i.e. new student in your class, ...) 
   - use of sperrklassen.txt or entfernen.txt (-> filter.txt)
   - think about getting user in class lists from the database
     for correction of exams, ...
   - think about lehrer.txt handling
     allow comments to be added in a new field
   think about ext-lehrer (teacher fo only one class).
     probably needed for vhs-Kurse, etc., ...
   - think about acl's and their handling in repair-directory
   - think about self adding of users
   - think about grpquota in projects
   - think about manually moving students in other classes
      - restrict manually moving to Permanent,Frozen?
      - manually create classes for Permanent
        or automatically create a class permanent, where all Permanent/Frozen users 
        a moved to?
        do they have an exchange directory?
   - Think about removing ALL files of a user when she is deleted
     (find /home/share ... and kill them)
     think about renaming every file in an exchange-directory
     of a user that wil be killed shortly to
       filename.txt   -> will_be_deleted_filename.txt
   - easy to hook in prefilter-scripts, that are run automatically




############################################################
STANDARDS:
############################################################
SCHULKONSOLE:
   - we are using perl (Nov,2005)


Quota in /var/www/people ?
without individual quota. owner of all uploaded files is www-data

The group teachers is added with mailaliases:
sophomorix-class --class teachers --mailalias

Standard alias is vorname.nachname



############################################################
INSTALLATION TESTSERVER:
############################################################

openldap 2.3.x is necessary (use our package)


A) Installation from Debian CD's
==================================================

1. install debian sarge

2. edit /etc/apt-sources.list

   add deb cvs.bszleo.de/sophomorix ./ 

3. apt-get update   

4. apt-get install sophomorix2 sophomorix-developer

  Hit RETURN to all questions

5. run tho following script:
       sophomorix-test
   this will test your system
   (if all test are ok, you are ready to use your server,
    if not: send mail)



B) Installation from LMZ CD's
==================================================

CD-Installation:
  - boot with option    auto26 or expert26
  - reboot without CD
  - internal NIC: eth1
  - externel NIC  eth0
    (vmware: eth0 is the card on top: briged)
    (vmware: eth1 is the card on the bottom: host only)


Testing lml3 in Network with 2.x:
 - set dhcp-range in both ml to nothing
   ml3: uncomment rangesetting in /etc/dhcp/dhcp3.conf


############################################################
RELEASES:
############################################################

? Workstation
   view für workstationaccounts (mit $)
   view für workstationuser

lehrer.txt zusatzfeld 'comment' (Platz in Datenbank suchen)

   sophomorix-setup-pgldap

   ??? folgendes ist eher schlecht

   Options --deb         (debconf-datenbank)
           --file        (/etc/sophomorix/pgldap/pgldap.conf)

           --Kommandozeilenoptionen

   SID: -- Beim erstanlegen in debconf-Datenbank wird SID gespeichert
        -- Beim Netbiosnamen ändern wird  
           vom linuxmuster Setup script

           linuxmuster/sambasid   

        -- Option --force-sid (forced die sid auch in schon 
               vorhandene Usereinträge in pg)

   NETBIOS Name:

         muss von sophomorix-pgldap-setup angepasst werden
         (evtl. mit --new-netbiosname)


   backpgsql zusätzlich im slapd -lml paket von Thomas S.


        sophomorix-setup-pgldap: database cannot be dropped, if user is connected
        (throw out users or what?)
        ldap vorher beenden.


        function  manual_delete_groups 
        (deletes a group altogether from the database)
        - check function
        - intelligently remove groups

        Funktionen für API:
         %data=get_userdata(user);
         Schlüssel wie in der Datenbank
         $name = $data{'name'};

         Database fields for cups (what is needed?)

         counting the users when sophomorix-class -i
         SELECT count(uid) FROM posix_account;
                 * alle Zeilen
                 uid alles wo uid NOT NULL

         SophomorixAPI to select users and groups


         test login


         make sid available in ldap

         save sid in database

         use transactions to modify the database
         (this is more complicated, than I thought)

         add tests to sophomorix-test (check groups, check_provided_files)

           
   - strichpunkt an schueler.txt intelligent anhängen
     (bisher in sophomorix.conf)

   - smbldap-usershow entspricht in etwa sophomorix-user
   - crypt zu md5 (Passwort-decription)
   - system() in perl mit sysrun tauschen (oder noch besseres)

   - use groups_admin in display ???
  
   - removing a project:
      - remove also project_memberships
      - remove all links to this project
      - ..


   - Disabling a project:
      - remove users,admins,groups,projects from this projects
               (Make the empty -> nobody is user in this project anymore)
        backup this membership data in a log-file
               to reactivate the group, issue sophomorix-project ...
               using this Data

     /var/log/sophomorix/project-modify.log
     /var/log/sophomorix/project-modify-archive.log


  BUGS: adding 3000 users:
          owner of some /home/teachers/name is root.root
                of some it is teachername.teachers
  has not reappeared when testing again.
   



Performance bug:
Reactivation is very slow (when a user reappears in schueler.txt)


------------------------------------------------------------
Code cleanup
------------------------------------------------------------
- move show ... loaded to higher loglevel
- move show Language ... loaded to higher loglevel

- use perl tidy

- remove?:  get_adminclasses_sub_school
            pg_get_adminclasses
            get_projects_school
            get_rooms_school (schneller)
            get_workstations_school (schneller)

show_....list:
should call fetch ... and just display the results
(avoid code doubling)

------------------------------------------------------------



- check what to do with quota, when removing a user???


- use mailaliases,mailist in subclasses ???? (do this later) 


- Begriffe 'standard-lehrer', standard-schueler aus quota.txt,mailquota.txt 
  (auch entsprechende Englische zulassen:
      standard-teacher
      standard-student
      standard-workstation
  )


- create_user_db_entry: parameter mailquota
  (is this necessary ?)


what about setting quota/mailquota for domcomp,workstation,Administrator ...



Bug: when sophomorix-quota -l galli
     dann : manchmal galli is not a sophomorix user
- tritt nicht mehr auf




BUG: skip empty lines in config files (review that)


Name avoidance: (problems with mailinglists):
avoid naming a longname/name of a project like:
  - another project
  - another group
  - anothers project longname

avoid adding a adminclass with the name/longname of a project






IS THIS REALLY NECESSARY
 table subclass_details
  class_details.type not necessary
  dont add to class_details, when adding a subclass
  view subclassdata
NO VIEW subclassdata (so far)


deleteadmin_from_pro : Fehler abfangen
usw. alle fetch_ delete ... durchguggen


meeting 21.3.2006

NOT creating a dir  in galli/_vorlagen and others, when user is added 
to a nonexisting class


Is this necessary?
wohin einsammeln soll konfigurierbar sein 
   A):  loginname
   B):  vorname.nachname
   C):  nachname


invent sysrun??:
sysrun needs package libsysadm-install-perl
and use Sysadm::Install qw(:all);



NEXT:

create a group students with all students (for testing) 
sophomorix-projects --update-studentsgroup

Schulkonsole:

funktion zum Tauschverzeichnis löschen
funktion zum ALLE links wiederherstellen


beim cp von netlogon stimmt was nicht




zusammenarbeit mit Schulkonsole:

variablen nutzen siehe perldoc Sophomorix::SophomorixAPI

1) alles was aus SophomorixPgLdap gebraucht wird in
   SophomorixAPI eintragen

   Liste function1,function2, ...

   Reihenfolge ergibt wichtigkeit

   -- bisher noch nichts


2) jeffbeck verschiebt die Funktionen und dokumentiert sie

   problem beim verschieben
       function wird in anderem paket gesucht


   -- später

   gibt es tools die funktionsaufrufe suchen und in einem script 
   zeigen, welche funktionen aus anderen Paketen verwendet werden??

   etags, ctags für perl?


   Klasse Error 
   /usr/share/schulkonsole
   use Schulkonsole::Error;



   zuerst linuxmuster-base, svn auschecken, debian paket machen
   URL:  https://hostname/schulkonsole/

??? smbldap-useradd adds user also in the secondary group ??? check this



TESTS:
- existence of new dirs from 1.6.1-1
- switching shares on/off
- creating data in tausch an being moved. Is data moved with user in home?



RENAMING loginname of a user:
- update DB
- update lehrer.txt (wishlogin)
- update /etc/mail/aliases (run sophomorix-mail)
- create mail alias for old loginname?
- mv homedir 
- mv maildir (rename account??)
- (mv webmin stuff)



variablen in SophomorixPgldap scheinen global zu gelten.
SphomorixBase: remove unused functions



Projekte:

- switch --join zur funktion bringen
- make a teacher join a project if --join




Austritt aus Klasse/Projekt/:

Ordner bleibt erhalten wenn nicht leer, User bekommt löschrecht (owner)
Schulkonsole.

Bei wiedereintritt soll Ordner mit korrekten Daten da sein



Is this necessary?
====================
add a field male/female to lehrer.txt
make configurable if a 
Lehrerinnen-Liste 
Lehrer-Liste
Kollegium-Liste
is created



userliste in allen sophomorix-*:    -u --users user1,user2,...
  - sophomorix-kill
  - sophomorix-add
  - sophomorix-move
  - sophomorix-repair
  - sophomorix-kill

Datei kann nicht eingesammelt werden da sich die Zeit ändert?

subclassen als projekte hinzufügen? Tut das?


BUG: /etc/aliases root.root 0644  (who changes this values) 
sophomorix-mail does not change these values (but should do it with umask)


Next: option --unignore

double loginname: 
newer user receives NO alias
older user keeps alias
later: override with database entry

.locked in __einsammeln
           cups-pdf


speed up the call to sophomorix-quota in
sophomorix-kill ??
the following way:
does quota need to be removed when killing a user???
  

sophomorix-add insert db_disconnect (grep for ???)
sophomorix-quota "  and imap_disconnect
sophomorix-kill imap_disconnect and db_disconnect


Multi-Treffen:

Feature Request:
  - austeilen an lehrer soll gehen (auch an einzelne)
 
IMAP-cyrus
 - bisher noch keine subdirs im cyrus
 - wenn ein user kein postfach hat mit *-repair oder *-quota anlegen
 - postfächer sind in /var/spool/cyrus/mail/
 - maildir-format
   Konvertieren: /usr/share/doc/cyrus(-common)/example/mbox to cyrus oder so





lml.mine.nu schulkonsole/shtml: descriptions


sophomorix-user: remove getpwnam???
save_tausch_klassen: getpwuid ersetzen.
getgrnam 
   bei collect in SophomorixBase
   sophomorix-subclass
   sophomorix-repair



log_script_exit:
use parameter to create return value for all exits

   Info: Rückgabewerte scripte 0-127 (evtl. 255) (ab 2 benutzen)
   z.B. mit exit 7;

   Return Values:
   ?   script called with wrong options






show return values of scripts:
ls -al [return]
echo $?




check list of systemusers in debian developers manual


when a teacher/students is disabled remove him from /etc/aliases???






use field 'scheduled_delete' for teachers (and other users) in the database
sophomorix-check --cron to 

   1. send mail to the teacher and a copy to root 
   - you will be removed from the system
     in xxx days aaa happens toleration
     in yyy days bbb happens
     list of files in the exchange dirs
     files in apache are kept
     email will be deleted
 
     please reply to root@xxx.de or contact the administrators
     if that is not correct

   - add  '### scheduled_delete 60::90### before the teacher entry in lehrer.txt
     where 60::90 is xxx::yyy
     (this has to be done at the start of sophomorix-check --cron)  





sophomorix-repair options:

--delete-from-homedir path-to-file

go through all homedirs to delete the file $home/path-to-file

--delete-old-dotfiles path-to-/etc/skel

    - read all files from path-to-/etc/skel and create md5sums
    - go through all homedirs
      delete the files that exist in path-from-/etc/skel 
      in the homedirs when they exist and and are NOT modified


when a user that exists (wwwadmin) and no quota in quota.txt is given,
there is a warning (check if the script is interrupted)


add a custom login-info:

first line: REPLACE_TEMPLATE=no  (add the contents to the template)
                             yes (replace contents to the template)





sonstiges

http://ekiga.net/

mediawiki mit .htaccess absuchern (aktuelle ct, 26.9.06)



KNOWN BUG: smbpasswd -d user tut nicht bei usern mitöäüÖÄÜß.


Feature Request:

Klassen/Raum/... wechseln. wieso nicht schon, wenn ich im pulldown
menue was wähle (Wechseln-button weglassen?)

Austeilen an einzelne Lehrer/Alle Lehrer wäre möglich, wenn
im Klassen wechseln menue die 'Klasse' Lehrer(Kollegium) erscheinen 
würde.

Andere ML's haben bunte Knöpfe in der Schulkonsole, linux nicht? 
Why? Styleguide?









- update procedure (ml3 testers)
- aike: usertoken (when not empty in db/usertoken in lehrer.txt 
        use usertoken as Kürzel)





print Befehl (in Werkvertrag ergänzen):

sophomorix-print --classlist klasse --postfix username
(oder statt --postfix ... --caller  : so wie bei der Passwortliste erstellen)
Die Dateien entstehen in /var/lib/sophomorix/print-data/klasse-classlist.csv
bzw. *.pdf


printing userlists: print *.csv *.xls of classes in schulkonsole
ist there a independant spreadsheet::write (like Spreadsheet::Read)



check teachers, lehrer   different naming

if teacher is scheduled_tolerated, it cant be moved to the attic
after ONE run of sophomorix-check
It can be moved after the second run


sophomorix-developer:
script to create a IDE: 
- emacs21
- perldoc
- cvs and checkout of sophomorix2



############################################################
Cron Jobs
############################################################
see manpage for run-parts for checking cron jobs
cronjob execution sends mail
cron itself doesn't log use logger

add a cronjob?  (weekly) with  "exec? quotacheck -a"  S. 147/151 LPI(O'Reilly)
add a cronjob?  fsck (so that no fscheck is necessary when rebooting)

Mail an are gesendet.



Nagios: public url, so that users can check status of deamons:
   - is www available?
   - can mail be sent, ...
decreased quostioning to admins




############################################################
sophomorix-vampire
############################################################

sophomorix-project
   --lock / --unlock / --skiplock

   create/delete /var/lib/sophomorix/lock/project.lock
   if lockfile exists, interrupt sophomorix-project without modifying anything
   useful when migrating, updating, ...

sophomorix-class --dump
   dump ADDITIONAL data of a class: maillist,...
   to be used ba sophomorix-vampire   


############################################################
Next Meeting:
############################################################

- freeze users as paedagigical measure?
  what must be frozen?

- create command to lock access to schulkonsole

- when log in (from thomas script) is created, then log information to see
  which teacher is in which room, -> create a maillist for the room automatically



############################################################
updateable package:
############################################################


BUG: (check this)
mein Testsystem: das tut (LANG ist )de_DE@euro)
ml3cd: LANG ist leer
(mail sent)
man sophomorix-mail : es wird zuerst nach der nicht existierenden
en manpage gesucht un die Deutsch nicht gefunden, obwwohl existent.

created request in RT


next: use pid of lockfile

next: put send_mail in a function:
   - recipient-list, commaseparated, add @domain
   - cc list
   - template-name
   - replacements for template

files:
   name-body.de
   name-header.de

replace name with: 
   mailquota_warning,
   project_deletion_warning,
   ...

database-field my language??

man 5 schueler.txt, ...
 


Unterordner spam anlegen: spam (ordner-trenn-parameter . oder /)


Modify printout of sophomorix-project -p astro -i

   Admins :           user1,user2,user3, ...
                      user18,user20
   Members(by option) user1,user2,
   Membergroups       group1:
                      user1,user2,user3            
   Memberprojects:    
   

-v unfolds membergroups
-vv shows alphabetical list of all users
    and the membership reason:
         user1 (admin)
         user2 (admin)
         user3 (member_by_option)
         user4 (member_group: m2kb3t)
         user5 (member_group: m2kb3t)
         user6 (member_project: project1)
         user7 (member_project: project1
                                -> project2)

use this to check information:

drop all secondary group memberships 
      find out if this user is admin
                            is member_by_option
                            is member by group
                            is member _by project
                            is member by project-> project
there must be no users left

if left: Warning: no reason for membership of userx

check the other way around:
list members of memberprojects, membergroups and check 
membership



NEXT: 

Buglist from rainer


Schulkonsole -> Projekte
Projekt löschen:
- Beim Löschen eines Projekts wird das Unterverzeichnis
"bereitstellen-p_projektname" der Projektmitglieder (Lehrer) nicht gelöscht
- Beim Löschen eines Projekts wird bei den Projektleitern das Unterverzeichnis "__einsammeln" gelöscht
- Beim Löschen eines Projekts bleibt bei den Nicht-Projektleitern (Lehrern) das Unterverzeichnis "austeilen-" erhalten (nach Minus KEIN Gruppenname)

Schulkonsole -> Projekte
Projektmitglied löschen:
- Bei Nicht-Projektleitern (Lehrer) verbleiben die Unterverzeichnisse "austeilen-p_projektname", "auszuteilen-p_projektname", "bereitstellen-p_projektname" und
"eingesammelt-p_projektname".
- Bei Schülern verbleibt logischerweise nur "austeilen-p_projektname" (die anderen werden auch nicht angelegt).
- Bei Projektleitern verbleibt das Unterverzeichnis
"bereitstellen-p_projektname"

/home/lehrer/$user/
unter
__austeilen
__vorlagen
_auszuteilen
_bereitstellen
_eingesammelt
existiert die Gruppe "Lehrer", für welche aber keine Möglichkeit auf der Schulkonsole vorhanden ist, um die Verzeichnisse zu nutzen -> Verzeichnisse für Gruppe Lehrer weglassen.




create more tests for projects


make function fetchinfo_from_project return something useful, when 
project does not exist 


vmware:

vmware server frei downloadbar (früherer GSX Server)
anleitung von Rainer in /root/software/vmware-server


Nagios:

/etc/nagios/   hosts.cfg contacts.cfg escalations.cfg
/etc/nagios/services 
/etc/linuxmuster/nagios.conf

script von Frank
linuxmuster-nagios-setup

scripte dessen Rückgabewerte genutzt werden 
0=OK
1=WARNING
2=CRITICAL
3=UNKNOWN
printoutput erscheint auf Nagios homepage
/usr/lib/nagios/plugins (wenn paket nagios-plugins installiert ist)

wohin lege ich nagios scripte die sophomorix checken?


https://server/nagios  administrator 

schnittstelle zu sophomorix?

Tests: 
- tut:  id administrator
- ist sophomorix.add leer?
- ist sophomorix.move leer?
- ist sophomorix.kill leer?

Scriptnamen
check_sophopmorix_id
check_sophomorix_add ...


/usr/lib/nagios/linuxmuster-plugins

suggests nagios nagios-plugins





Fernwartung:

mehrere Mailadressen, falls es probleme gibt

mails verschicken per cron oder scripte von Nagios abprüfen lassen?

verändeungen durch remote admin loggen
a) Zugriff jederzeit durch support möglich
b) Zugriff nur per Erlaubnis



next steps in sophomorix-vampire:

Messages: connect internal devices of servers
give ip and subnet of old server
give ip and subnet of new server

shut down services
- rembo
- dhcp

add additional ip to internal interface of new server


restart services
- dhcp 
- rembo


sophomorix-vampire

--sync-workstations ws1,ws2,ws3,...
   Alle, wenn option leer

3 or 4 semikolon automagically

add option
sophomorix-mail --create-mailbox to add mailbox without unix account 

sophomorix quota: user mitzzaehlen beim aendern, damit man sieht wie lange es noch geht.


replace cp /etc/passwd with getent paaswd > file;scp file

check if sophomorix-check --use-gid works
                          --use-uid
                          --no-kclass needed?
                          update man page


sophomorix-vampire:
    sync mail:
       imapsync 3.x -> 3.x
       pop2imap ?
       offlineimap (debian-Paket)
       mb2md (debian-Paket) mailbox -> maildir

Bug? sophomorix-quota sets mailquota for all
     is there a faster way to do this
      i.e. read mailquota of all users and decide if it is needed to be set?
   

Bugfix: als usertoken wird 'kurz' hochgeladen.
        muss bei sophomorix-vampire zu usertoken gepached werden, wenn lehrer.txt
        ins system kopiert wird muss ;kurz; zu ;usertoken;


Bugfix # 129: in lehrer.txt steht als login IMMER kleinbuchstaben, auch 
wenn großbuchstaben.
 

nagios
https://servername/nagios2/

  
add share of teachers to be synced as well

================== CHANGELOG ========================================

1.9.7-1 (2007-01-xx)
  - sophomorix-vampire:
    added option --sync-shares to sync all shares
    (or a list with --class class1,class2,...)
  - sophiomorix-check
    Bugfix: marous u was not correctly transformed
            used octal dumper command:  od -b
            to find out about character
  - sophomorix-vampire
    Bugfix: using teach-in.txt correctly to find login in the old system
    added syncing of extraschueler.txt and extrakurse.txt
  - german -> english in -add, -move and -kill
  - fixed performance bug, when showing killable users
  - sophomorix-mail:
    added option --kill-mailbox to kill a mailbox without unix account
    make --showmailboxes --showtype show group ot type 
    CYRUS (only cyrus account, no unix account) 
  - Bugfix: Mailbox not killed when killing users
  - removed double query from sophomorix-kill to speed up script
  - sophomorix-add: changed formatting of -i list 
  - tested sophomorix-vampire
    - Bugfix: use loginname of old installation (lowercase, no - in name)
  - added option to sophomorix-user to mark all users to be killed

1.9.6-1 (2006-12-16)
  - fixed Bug #104 (tausch Schüler) (and #103 (merged to #104))
  - changed permissions in /etc/ldap to be like etch.
  - updated package to use slapd 2.3.29 and others from etch

1.9.5-1 (2006-12-14)
  - closed Ticked #99 configuring slapd

1.9.4-1 (2006-11-22)
  - BUGFIX: correct smb loginscripts are: login.bat and logon.bat
  - update man sophomorix-test-bunchofusers and help
  - BUGFIX: tetchusers_by_option_from_project showed only astro group
            correctly
  - basic test for projects runnig: starting-state.dump is working
  - updated manpage of sohomorix-project
  - BUGFIX: --create-from file does nothing if project doesnt exist
  - Create projects in an order so that member are created before 
    the project
  - changed sophomorix-project --update-from-file and
    --create-from-file to read better dump format
  - tag users in new table projects_members that have been added
    by option --Members (--addmembers)
  - changed sophomorix-project --dump in a better format 
     (smb.conf style, with project_name prepended)
  - checked out from CVS to an empty dir and built all packages there
    diffed the contents(filelist) to my working copy and made the lists
    equal.
    (fileliste made with
       lesspipe old/sophomorix2_1.9.3-1_all.deb | cut -d. -f2 | grep ^\/
     for all packages
    )
  - removed *-webmin, *-groupadd, *-useradd and their manpages
    from CVS. So that they are not added to sophomorix-doc-html anymore
  - added @ in Makefile to avoid noisy output/speed up things
  - sophomorix-project:
    - added options:
        --create-from-file file
          (standard file is /etc/sophomorix/project/projects.create)
          create projects if nonexisting
          do nothing with existing projects

        --update-from file file
          (standard file is /etc/sophomorix/project/projects.update)
          create projects and update them 
          (useful for admins, to keep some projects up to date (netadmins) on the 
          command line)
   - BUGFIX: add cups-pdf when adding users (not only when repairing)
   - fetched netlogon.bat and netlogin.bat from tschmitt's svn 
     and added it to sophomorix-base
   - fetched /etc/samba/smb.conf.global from tschmitt svn and added it
     to the sophomorix-setup-pgldap scripts
   - sophomorix-add, -move, -check, ..
      Options --unlock and --lock to delete/create sophomorix.lock
   - BUGFIX: log errors behind options in command.log
   - added option sophomorix-quota --cron:
      - check usage of mailquota in cyrus
      - send mail to user with quota warnings  
           use Email::Send;
      - do nothing if warn mailquota is disabled sophomorix.conf 
   - added weekly cronjob to bzip2 database dumps 
   - added weekly cronjob delete bzip2 database dumps 
   - BUGFIX: use $subclasses under /*/subclasss in repair.directories
   - BUGFIX: use $projects under /*/projects in repair.directories
   - sophomorix-kill -i (group adminclass and users asciibetically)
   - sophomorix-move -i (group adminclass and users asciibetically)
   - sophomorix-add -i (group adminclass and users asciibetically)
   - fetched new smb.conf from thomas schmitt
     replaced new @@vars@@ with values in sophomorix-devel.conf
   - move some sql path vars from sophomrix-setup-pgldap 
     to sophomorix-devel.conf
   - cron.weekly
      - call ANALYZE and log it
   - create/drop indices
     options --create-indices-only, --drop-indices-only, --update-indices-only
     Do that on package update:
        1) created a plain text file drop-index.sql with index names 
           to remove use perl,DBI, to remove these indices from the 
           database if they exist (catch errors)
        2) created a file create-index.sql to add new indices with a script 
           in one transaction
        3) call ANALIZE in the same *.sql-script
   - added logger to cron.daily/weekly/monthly in sophomorix-base
   - sophomorix-quota -i and manpage:
      - repquota -tsv /dev for a detailed list of quota


1.9.2-1 (2006-11-08)
   - added prefixes to __austeilen and _eingesammelt
        use $handoutcopy_string="austeilen-";
        before $handoutcopy_dir="__austeilen";
        use $collected_string="eingesammelt-";
        before $collected_dir="_eingesammelt";
   - smb admin stuff:
     pgmadmin only in domadmins
     added user domadmin for joining domains
     pgmadmins group removed
   - sophomorix-project
       - updated manpage
       - added option --dump
   - added file projects.create and projects.update to package
   - added options to sophomorix.conf mailquota_warn_kb

1.9.1-1 (2006-10-28)
   - changed option --user to --teacher (sophomorix-user)
     updated manpage accordingly
   - added variables in sophomorix.conf:
       email notification mailquota is almost used to the limit 
     reached (in sophomorix.conf)
   - merged database update into sophomorix.sql
   - scheduled_toleration:
     - sophomorix-check checks the scheduled_toleration and:
       - updates the database to status T
       - comments the line in lehrer.txt
     - sophomorix-check sees this sheduled_toleration date
     - sophomorix-user --user user --scheduled-toleration date sets date 
       in the database
   - dumping the ldap database before modifying it by *-add, *-move, *-kill
   - packaging files for the support
      - dumping the ldap database and packaging it
      - added options to add custom files to the *.zip
      - added DIRLIST-tag in sophomorix-support.conf to pack ls-al files
        into *.zip 
      - logging files in the tree in support.log
      - creating a tree in /root/sophomorix-support
      - added configuration file sophomorix-support.conf
      - added sophomorix-support and manpage (script does nothing)
   - sophomorix-test: use path /home/attic
   - moved homes of attic users to /home/attic
   - use attic instead of dachboden/speicher (homes are still in /home students)
   - create /home/attic with sophomorix-repair and repair.directories
   - create lehrer.txt and schueler.txt, when they are not existing
   - exit with unlocking and logging when
     slapd and postgres is not running 
   - renamed scheduled_delete to scheduled_toleration
   - show scheduled_delete and usertoken with sophomorix-user 
   - added field scheduled_delete in posix_account_details
   - modified type of posix_account_datails.usertoken to varchar
     (upgrade der Datenbank (als root): 
      1) Delete posix_account_datails.usertoken
      2) Call: 
         psql -U ldap ldap < \
         /usr/share/sophomorix/config-templates/pg/upgrade/sophomorix_1.8.13.sql

   - extended function update_user_db_entry to update usertoken
   - created function upload_db_pushdata to decect what must be uploaded
   - fetching usertoken from database
   - added option 
     sophomorix print --classlist
     created a formatted, printable list of users of a class
   - added windows, linux and other login-data
     to login-info.tex 
   - documented option --skiplock in -mail,-quota,-print
   - added function log_script_exit to unlock scripts when exited 
     unnormally. print Errors into command.log
   - added locking in the following scripts (see sophomorix-devel.conf)
     - sophomorix-check
     - sophomorix-add
     - sophomorix-move
     - sophomorix-kill
     - sophomorix-teach-in
     - sophomorix-repair
     - sophomorix-setup-pgldap
     - sophomorix-setup
     - sophomorix-quota
  - these scripts create the lock file /var/lib/sophomorix/lock/sophomorix.lock
  -  added option --skiplock for  sophomorix-add, 
                                  sophomorix-move 
                                  sophomorix-print
     used this option when calling these scripts from within other 
     sophomorix scripts

   - s*-kill,-move,-add: count users when showing --info
   - removed from sophomorix-test-bunchofusers to handoutcopy to 
     workstations in a userlist (we only handout to workstations)
   - sophomorix-mail --showmailboxes shows number of dirs of a users 
     mailbox
   - added moodle,ogo,schulkonsole,horde to
     sophomorix-print --one-per-page
   - Make sophomorix-test-bunchofusers work with Capital letters 
   - Make use of äöüÄÖÜß configurable in sophomorix-devel.conf
     (Standard: allow_umlaut="no")   
   - Bugfix: when 3rd field contains birthday, do NOT throw warning
             anymore; continue orderly
   - Bugfix: when 4th ; in lehrer.txt is missing, no error is thrown
             anymore; continue orderly
   - Bugfix: sophomorix-mail --showmailboxes 
             showed one line per Dir of user (now: one line per user)
   - Bugfix: sophomorix-taech-in: remove user from 
             sophomorix.move when teached in   
   - Bugfix: sophomorix-check: remove errors when 
             user has no exitadminclass


1.8.14-1 (2006-09-27)
   - naming conventions:
       login       without  Ä,ä,Ö,ö,Ü,ü,ß
       mail        without  Ä,ä,Ö,ö,Ü,ü,ß
       gecos       without  Ä,ä,Ö,ö,Ü,ü,ß
       firstname   with     Ä,ä,Ö,ö,Ü,ü,ß
       surname     with     Ä,ä,Ö,ö,Ü,ü,ß
   - dont allow allowed '-' in login names
   - BUGFIX: set quota when user is removed from quota.txt
     back to standard/class/project value
   - updated manpage of sophomorix-class
   - Bugfix: sophomorix-class --quota standard 
     uses standard/project values of users in this class again
   - sophomorix-quota --force sets quota for users in passwd 
     (non-sophomorix users )
   - when logging an empty parameter, log '' in 
     /var/log/sophomorix/command.log
   - running upgrade scripts depending from which version we upgrade
     (like *.sql upgrade scripts)
   - made - signs usable in firstnames and surnames
   - creted latex-templates login-info.tex (language dependant)
   - created one side per user login card to show more info
     option --one-per-page
   - updated sophomorix-test 
   - made capital letters usable as firstname and Lastname

1.8.13-1  (2006-09-19)
   - for testing database upgrade only 

1.8.12-1  (2006-08-22)
   - removed 'DEBUG' messages from sophomorix-add
   - use absolute paths when calling scripts with 'system'
   - call log_script_end in all scripts
   - created function log_script_end
   - make every project begin with p_ (name and longname identical)
   - make every project have 3-14 characters after p_
   

1.8.11-1  (2006-08-19)
   - sophomorix-quota
     ignore quota for teachers in quota.txt and mailquota.txt
     throw warning, continue script
   - updated manpage of sophomorix-teach-in
   - sophomorix-teach-in:
     if identifiers in option --teach-in are given more than once, they are ignored
     and a next:: line is printed for further processing with schulkonsole
     if login is given in --ignore AND --teach-in the login is ignored 
     and a next:: line is printed for further processing with schulkonsole
   - sophomorix-quota: 
     - setting quota for sysusers
     - catch errors, when user in quota.txt/mailquota.txt does not exist
   - sophomorix.conf: made all variables use "yes/no" instead of "ja/nein"
   - added sophomorix.conf to packaging in config-templates
     (will be used by schulkonsole)
   - Bugfix: typos in sophomorix.conf
   - Bugfix: sophomorix --reset-user did not reset workstations 
   - added more users to forbidden_logins, a list of logins not to create 
     when adding users
       /etc/passwd
       /etc/group
       existing logins in database
       existing groups in datadase
       manual list in sophomorix-devel.conf


1.8.10-1  (2006-08-09)
   - removed all disturbing calls via C-Library and ldap.
   - allow also vorname_nachname for mail aliases in sophomorix.conf
   - moved connecting info to higher loglevel
   - hide password when connecting to imap
   - mocked up display of mailboxes
   - removed variables for vorname_nachname_tausch in sophomorix.conf

1.8.9-1  (2006-08-06)
   - Bugfix:
     manage groups in projects and projects in projects only with members
     (not admins)
   - code cleanup in sophomorix-check:
     - dont check anymore the order of firstname/lastname
     - use filter script instead
   - create variable in sophomorix.conf to create a pre filter script
     - checked this, added appropriate exits and messages
   - Bugfix:
       delete users of membergroups of a project only when
       they are not member via another project
   - Bugfix:
       delete users of memberprojects of a project only when
       they are not member via another project or adminclass(membergroup)
   - Bugfix: when admin is removed from a project with 
      sophomorix-project --removeadmin ...
      remove it also as a user
   - added option: sophomorix-teach-in --all (show all)
   - removed from Conf: @quota_kommentar = ("Test", "Daten", "");
   - Bugfixes in htaccess-templates
   - added cronjobs to package sophomorix-base with dh_installcron 
   - updated manpage sophomorix-mail
   - when imap.secret is not there, no configuration is made  
   - made the connect function read the password from /etc/imap.secret
   - added option --showmailboxes to sophomorix-mail, which shows an overview 
     of all mailboxes
   - replaced call for cyrus-user.pl with this functions in
     sophomorix-add 
     sophomorix-kill 
     sophomorix-quota 
   - added functions to SophomorixBase.pm to manage an imap server
     (connect, add/delete mailboxes, show/set quota, show list)
   - added option --project name to
      sophomorix-quota
      sophomorix-passwd
      sohpmorix-vampire
     (and updated the manpage)
   - speed up sophomorix-quota call in
      sophomorix-class
      sophomorix-project
      sophomorix-add
      sophomorix-move
   - speed up sophomorix-quota when fetching login_type:
     (connect just once to the database for every user)
   - added option sophpomorix-print --info to print to standard out 
   - added option --teach-in login::identifier to sophomorix-teach-in


1.8.8-1  (2006-07-18)
   - repair.directories: make /var/www/people 
     globally usable/unusable
   - Bug: sophomorix-teacher -i --teacher xxx does not
          show admiclasses of teachers
   - avoid resetting other users than students/teachers with
     sophomorix-user --reset user user
   - allow 3777/0700 in /home/share/school (repair.directories)
   - Bugfix: quota was set to class_mail_quota, 
             because 'empty' quota (-1) was accidentally used
   - directory where www-data can load files via webdavs:
       made them  www-data.www-data 0755
   - new working options in sophomorix-teacher:
        --showclasses
        --showteachers
   - group wwwadmin is singular
   - updated formatting of console output
   - changed ids according to administratoren.txt
   - updated help and manpage of sophomorix-teacher:
     --showclasses, --showteachers


1.8.7-1  (2006-07-15)
   - updated man page of sophomorix-quota
   - Bugfix /var/log/sophomomorix is 0700
   - Bug closed: sophomorix-taecher --collect does nothing
   - Bugfix: __einsammeln not writeable


1.8.6-1  (2006-07-12)
   - fixed som permission stuff
   - fixed mailquota issue (modifying quota on an nonexisting account)
   - sophomorix-repair: new option to repair
     .htaccess files in /var/www/people
   - sophomorix-www: show help when options are missing


1.8.5-1  (2006-07-11)
   - adding /var/log/sophomorix with root.root 700 to package
   - Bugfix: allow sophomorix-class activate mailaliases (and maillists)
     for the group teachers (type teacher)
   - removed schulweit_tauschen variable in sophomorix.conf
     and SophomorixTest.pm
   - missing function loading added in sophomorix-www
   - typo in sophomorix.conf removed


1.8.4-1  (2006-07-08)
   - removed package sophomorix-sys-pgldap (not needed anymore)
   - code cleanup:
       replaced update_gecos function
       removed all calls to functions in SophomorixSYSPgldap
   - sophomorix-print: 
       - made latexing standard (instead of pdflatexing)
       - removed class check (nonexisting class shows empty printout)
       - added option --pdflatex
   - added a logrotate config file to package sophomorix-base to
     log command.log
   - Bugfix: /var/cache/sophomorix not created
   - added basic logging (date-time::start::script) to all scripts
   - added function to read /etc/linuxmustser/classrooms
     (1 room per line)
   - adding a user with sambapwmustchange:
     set sambapwdmustchange=0 			password must be changed on login
     set sambapwdmustchange=24...(magic number) 
     (see: smbldap-useradd -B 1 user)
   - catched error when colling sophomorix-quota with nonexisting lehrer.txt
   - moved all tasks to /var/cache/sophomorix
   - new sophomorix-teach-in options and updated manpage:
     --next n
     --ignored-users
     --ignore user1,user2,...
   - sophomorix-teach-in reads sophomorix.teach-in.ignored and does not 
     ask about these users anymore (when running *-teach-in multiple times) 
   - sophomorix-teach-in creates .../check_results/sophomorix.teach-in.ignored
     for users that are not teached in and therefore ignored
   - Bugfix: sophomorix-teach-in removes 
             user from sophomorix.add when this user is 
             teached in (new user connected to old system user)  
   - Bugfix: owner,permissions of collect_dir


1.8.2-1  (2006-07-03)
   - changed the test for __einsammeln only
   - removed all subdirs from __einsammeln when creating/resetting a user
   - Bugfix: 
     sophomorix-teacher --teacher xxx --handoutcopy 
         --users user1,2,... --fromclass class
     does work now (also: --fromproject project)


1.8.1-1  (2006-06-25)
   - updated all scripts to common options 
     (i.e. users instead of loginname, ...)
   - setting mailquota in the database works (cannot check with cyrus)
   - sophomorix-quota: withaut options use all users 
   - sophomorix-add, ... : call "sophomorix-quota --students --teachers" 
     to skip other users (Workstation) and gain speed
   - sophomorix-quota: option --teachers works
   - BUGFIX: create_userlist in SophomorixAPI.pm 
   - get_ml_users --> fetchusers_sophomorix
   - use function to determin login_type in sophomorix-quota
   - moved path to cyrus.pl to DevelConf
   - added correct path to cyrus.pl (tschmitt)
   - added administrators to users for which quota is set
   - removed hardcoded stuff for admin from quota:
     new administrators are in postgres/ldap (no extrawork needed) 
   - changed --h output of sophomorix-passwd
   - added function to set some files to root.root 0600
      - use it for configfiles with password in sophomorix-setup-pgldap
   - renamed unused functions in SophomorixBase
   - remove dachboden, speicher from fetchadminclasses_from_school
   - removed rest of old kernel_update stuff


1.8.0-1  (2006-06-18)
   - romoved bugs from sophomorix-test-bunchofusers
     --handout
     --handoutcopy
     --collect
   - updated sophomorix-project manpage
   - option sophmorix-project --tree (overview of project memberships)
   - all sophomorix-www options addXxxxYyyy are 
     calling XxxxYyyy to avoid doule code 
   - manpage sophomorix-www updated
   - creating a .htacces file for project/adminclass, when user/class/project
     is added, and file doesn't exist
   - sophomorix-www: options group-public/private-no/upload now working
   - setting correct owner and permissions when creating/modifying 
     .htaccess files
   - renamed sophomorix-www options student-*-'* to user-*-*
     (they also work for teachers now)
   - when adding a student: student-private-noupload is set to
     /var/www/people/students/user/.htaccess
   - sophomorix-www: options student-public/private-no/upload now working
   - replaced Administrator with administrator in
       - htaccess-files
       - repair.directories
   - created option --student-public-upload in sophomorix-www 
     as an example function
   - /var/www/people/students/$user is deleted when user is killed
   - /var/www/people/students/$user is deleted when user is killed
   - updated manpage of sophomorix-project 
   - added nonworking script sophomorix-www with manpage to package
   - dropped classes subdir (www-dir of a user shouldn't change, when 
     moving her to another class)
        /var/www/people/students/klasse/student
        ---> /var/www/people/students/student
   - new options in sophomorix-project (accepting lists)
       --addmembergroups
       --removemembergroups
       --addmemberproject
       --removememberproject
       --addadmins 
       --removeadmins
       --addmembers
       --removeadmins 
   - sophomorix-print: allow _ in schoolname
   - Bugfix: prefix strings not created with sophomorix-repair
   - removed buggy field from database (memebdata or so)
   - renamed account Administrator to administrator
     (Problems with uppercase) 


1.7.4-1  (2006-05-21)
   - renamed $handoutcopy_string to $to_handoutcopy_string
   - removed $HOME/windows from tests
   - Tests in sophomorix-test-bunchofusers are all working again
   - collecting distributung data to klassenarbeit instead of aktueller_raum
   - collecting Data from workstationlist, userlist
   - Bugfix: current_room is missing in $handout/workstations

1.7.3-1  (2006-05-16)
   - added handout type room
   - Bugfix: pg_get_grpup_type works for workstations
   - Bugfix: sophomorix-test-bucnchofusers throws error
     reason: sophomorix-user --reset-user didn'd used longnames
   - new smb.conf from linuxmuster-base, Revision 24
   - fetch serverip and internmask from debconf
   - $HOME/public_html --> $HOME/private_html
   - sophomorix-print works for classes (nothing changed)
   - new htaccess files:
       Naming convention of the files:
          public:    available in the www
          private:   not available
          upload:    student can upload
          noupload:  member of teachers or administrators can upload 
          Teachers
             1. teacher-public-upload
             2. teacher-private-upload
          Students or groups(with another template)
             1. student-private-noupload
             2. student-private-upload
             3. student-public-noupload
             4. student-public-upload
          (1. to 4. with group instaead of student)


1.7.2-1  (2006-05-11)
   - sophomorix-user: new option --empty-password when resetting account
   - Bugfix: use short_name of project, when long_name is empty
   - shortend printout when sed-ing a file
   - sophomorix-repair (go to help, when -p is forgotten
     and --command-number is given)
   - removed sophomorix-samba from package
   - BUGFIX: sophomorix-teacher --teacher xsd -i  
       (Error, when user nonexistent)
   - added basic support for netlogon scripts
   - sophomorix-devel.conf is in english now and cleaned up
   - added @@message3@@ to all scripts
   - replaced @@basename@@ with @@basedn@@ in all config files and scripts
   - killing a project removes /var/www/people/projects/$PROJECT
   - adding a user creates a dir in /var/www/people/[teachers|students]
   - added /var/www/people/[teachers/students/projects]
   - added .htaccess file in each teachers/students public_html
      -- owner is www-data.www-data
      -- permissions are 0400
   - added $HOME/public_html apache templates to debian package
   - Bugfix: fetchadminclasses_from_school displayed group of teachers
   - $HOME/cups-pdf  user:teachers 0700
   - Dir to collect data changed to:
      - $teacher-$datewithtime_$klasse
   - nscd start/stop in
      - sophomorix-add
   - Changed Permissions of $HOME
   - Changed directory structure:
      - remove $HOME/www/public_html
      - use $HOME/public_html
      - add $HOME/cups-pdf  user:teachers 0700 (students and teachers)
   - Bugfix: add Administrator with shell /bin/bash
   - Bugfix: fetchdata_from_account shows wrong account-type for workstations 
   - CODE Cleanup:
      - everywhere where homedir was fetched by getpwnam:
        replaced it with fetchdata_from_account
      - SophomorixBase:
      - removed function get_ka_raeume_in_schule
      - removed function check_raum
      - removed function get_raeume_in_schule_hash
      - removed function get_lehrer_in_klasse
      - removed function check_leher
      - removed function get_klasse_von_login 
      - removed function formatiere_liste
      - removed function user_links
   - removed unneeded testscripts and their manpages from
     the package sophomorix-developer 
   - added CVS-Id-Keyword to all relevant files 
   - removed 3 unneeded variables from sophomorix-devel.conf
   - removed loading SophomorixPgLdap or SophomorixFiles 
     --> load always Sophomorix-Pgldap
   - dropped dependency from package: sophomorix-sys-files not needed anymore



1.7.1-1  (2006-04-19)
   - All tests for handout/collect/tasks are working (Werkvertrag 4) 
   - Bugfix: create_share_link does not create links into subclasses
   - moved prints to higher log_level when resetting a user 
   - create task links for workstation users
   - fixed function pg_get_group_list:
     returned primary group double
   - Fixed Bugs: two lines in repair.directories were not replaced 
     correctly from sopomorix-repair
   - removed option --www from sophomorix-repair (was deprecated)
   - added option --command-number in sophomorix-repair
     (allows to specify only one command (= line in repair.directories)
      to be executed)
     commands can be shown with option -i
   - replaced the following getpw*-calls (via ldap) in SophomorixAPI 
     with postgres databse queries:
        get_rooms_school
        get_workstations_school
        get_workstations_room
     (only get_ml_users is left)  
   - made sophomorix-user --reset-user work with workstation users
   - pg_get_group_type knows type 'room' and type 'administrator'
   - sophomorix-test-bunchofusers: adds/removes workstationaccounts
   - Fixed Bug: teacher: in _vorlagen is 'aktueller raum'
   - sophomorix-user --reset-user user1,user2,...
     cleans up a users homedirectory (deletes data and creates new dirs)  
   - changed type "class" to "adminclass" throughout all scripte
   - added create_share_directory to all calls to create_share_link
   - sophomorix-teacher --teacher xx --users user1,usre2,... \ 
     --fromroom --handoutcopy
   works and ist tested


1.6.1-1  (2006-04-05)
   - dont create /var/lib/sophomorix/database anymore (tested)
   - renamed link managing dir from _austeilen to _vorlagen
        _austeilen contains directories
        _vorlagen contains links
   - When creating a user:
     create $HOME_LEHRER/_einsammeln/aktueller_raum
     create $HOME_LEHRER/_einsammeln/klassenarbeit
     create $HOME_LEHRER/_bereitstellen/klassenarbeit
     create $HOME_LEHRER/_austeilen/aktueller_raum
     create $HOME_LEHRER/_verteilt
   - added parameters for sophomorix-teacher:
      --shares|--noshares
      --userlist
     to set shares to access/no access  
   - view memberdata: 
   - SQL-View memberdata:
        order is OK 
        project_details.longname is also shown
   - sophomorix-setup-pgldap reuses paswords for rootdn and dbpasswd
     if it can find a passwdord
   - made sophomorix.sql install the database as a transaction
     (if an error ocurs, create no database entries at all) 
   - modified sophomorix-test to test correctly
   - modified manpage of sophomorix-subclass
   - sophomorix-subclasses
         needs --split to actually split a class
         otherwise -h is assumed
   - removed creation of projects_db from sophomorix-projects
   - removed - from code and put it into the language files
     (possibility to use empty string as prefix)
     - modified sophomorix-test-bunchofusers to test that
   - created new user directory _bereitstellen (only teachers)
     - create dirs to handout data herein
     - modified sophomorix-test-bunchofusers to test that
   - removed dbname and dbpasswd from odbc.ini 

1.6.0-1  (2006-03-28)
   - removed displayname from
   - changed repair.directories from admin.admin 
     to Administrator.domadmins  ...
   - create dir /home/administrators for all (3) admins 
   - don't create admin anymore
   - crete group teachers in ldap
   - added user Administrator to printoperators
   - sophhomorix-repair works a bit
   - created functions for sophomorix-repair 
   - add groups in sophomrix-setup-pgldap only when necessary
   - generate a random password for postgres access of slapd
   - Bugfix: handout to subclasses is without errors in 
     sophomorix-test-bunchofusers 
   - when joining a class, 
       make sure to join subclasses and 
       create directories for subclasses
   - if a class is split, add teachers to all subclasses which have users
   - adding a directory to handout data (_vorlagen/projectlongname) added when 
     admin jons a project
   - view memberdata:
       Bugfix: shows sophomorixstatus
       Bugfix: adminclass shows gid insead of gidnumber
       Sorted by gid
   - added user Administrator to group administrators (win: Administrators)
   - added user pgmadmin in ldap
   - replaced get_students_school with fetchstudents_from_school
   - new function get_students_from_school
   - prepared new functions to fill out:
      show_class_teacher_list
      show_teacher_class_list
   - Bugfix: make sophomorix work with empty classes, projects
   - sophomorix-teacher
     when generating mailinglists of adminclasses, add teachers which 
     have added themselves to these classes 
   - SQL-View classdata:
      - show only entries from class_details
   - sophomorix-teacher calls sophomorix-mail,
     when adding or removing a teacher to an andminclass
   - renamed sophomorix-split to sophomorix-subclass
      - script
      - man pages
   - removed provide_my_class_file (provided .sophomorix/...)
   - removed get_my_adminclasses from sophomorixAPI.pm
   - made sophomorix-teacher --add --remove 
        more forgiving, when adding to a class again and again
   - Bugfix: dont add to class_details, when adding a project
   - new table for teachers in adminclasses: classes_admins
     (replaces $HOME/.sophomorix/MyAdminClasses)
   - sophomorix-test-bunchof-users
       --add: adds some projects
       --delete:  removes the projects
   - updated manpage *-teacher *-project
   - created option to remove a project completly 
     (sophomorix-project --kill)
   - create directories for project admins to handout and collect data
   - rewrote some stuff to collect/handout to projects
     (still not finished) 
   - added options 
        --collect
        --collectcopy
        --handout 
     to sophomorix-teacher
   - added test to sophomorix-test-bunchofusers:
     - vorlagen bereitstellen
     - einsammeln 
   - option --work in sophomorix-test-bunchofusers to test:
       - distribute Files


1.5.8-1 (2006-03-14)
   - added /home/tasks/teachers 
   - sophomorix-class calls sophomorix-mail and
     sophomorix-quota when needed
   - sophomorix-project calls sophomorix-mail and
     sophomorix-quota when needed
   - add longname of project to maillist in sophomorix-mail
   - when teacher self-joins a adminclass:
      - add her to the group
      - create links in share, tasks
   - when creating a user, add links in tasks
   - removed function user_links and replaced it with
     create_share_link
     remove_share_link
   - sophomorix-mail adds mailalias and maillist to projects
   - added calls to sophomorix-quota/-mail to
      sophomorix-add
      sophomorix-move
      sophomorix-kill 
   - added manpage to sophomorix-mail
   - sophomorix-class:
       - edit mailaliases and maillist
   - sophomorix-mail:
       - added script itself
       - adds to /etc/aliases
       - mailaliases and maillist
       - updated documentation 
   - Database: added mailalias and maillist to class_details
   - sophomorix-split: show user number in groups when -i
   - sophomorix-split: interrupt when -c class
     is not existing and an adminclass
   - sophomorix-split: added option 0members user1,user2,...
     (Removes user1,user2,... from all subclasses)
   - sophomorix-spilt creates links into subclass share dir
   - order classes,projects alphabetically when displaying
   - condensed output of sophomorix-quota
      - show only users wich quota is changed
      - counting users corrected
   - condensed output of sophomorix-add 
      - printout messages only when users are added
      - setting quota only if users are added
   - removed sophomorix-usearadd
            sophomorix-groupadd from Package
   - sophomorix-setup-pgldap checks if database exists and 
     connection is possible (should be left out)
   - modified manpage of sophomorix-class
   - mailquota    0=unlimited   -1=unused
     quota        0=unlimited   'quota'= unused
   - modify class quota and mailquota with sophomorix-class
     (remove quota with empty string )
   - updating mailquota in database works
   - added field mailquota to lehrer.txt
   - added mailquota.txt
   - database-upgrade seems working
   - added parameters to sophomorix-setup-pgldap --oldversion, --newversion
     call them correctly from the sophomorix-pgldap.postist file
   - makefile installs all *.sql upgrade files and the debian
     package installs them in the sophomorix-pgldap package
   - sophomorix-setup-pgldap can list files to upgrade in correct order
   - function  manual_delete_groups (deletes a group altogether from the database)


1.5.0-1 (2006-02-23)
   - speeded up function login_type in sophomorix-quota using SQL
     instead of getent
   - added field mailquota to class_details
   - showing new version in sophomorix-pgldap.postinst works
   - formatting s*-project -i modified for 
   - quota is working now
   - checked output from sophomorix-quota in different loglevels
   - s-quota: show quota of project works with pgldap
   - Bugfix: store 2000+200 in AddQuota as a String instead of calculating 2200 
   - adding clients local wingroups with type=local and SID=S-1-5-32-*
   - removed options smbroot in sophomorix-add
   - allow only a-zA-Z0-9_- as LongName/name of project  
   - Linkname to project is Longname of project
   - all members Linkname is updated, when the LongName of a project
     is changed
   - formatting of s*-project -i changed     
   - SQL-View projectdata:
      - shows only entries from project_details

1.4.9-1 (2006-02-16)
   - recreating links when moving a user
   - adding links to the share directories of all projects
   - adding a user (sophomorix-add) puts them in all groups
     its adminclass is a member
   - if nonsense is given as MemberGroups or MemberProjects, show errors
   - sorting usernames when displaying info
   - adding groups to projects
   - new options to sophomorix-project
          --joinable
          --notjoinable
   - new field for projects: joinable (true/false): can a teacher join or not
   - groups_groups is NOT working (THO)
     groups_groups -> project_groups (only to store data)

1.4.8-1 (2006-02-12)
   - insert MemberGroups (primary) into groups_groups
     (Table looks ok, but seems not to be working)
   - using creationdate and sophomorixstatus when adding a project
   - added option sophomorix -i -p project, displays info
     about project
   - remove create_project_db and oldstuff
   - unified create_project and create_project_db
   - added AddMailQuota to project_details
   - moved create_project to SophomorixPgLdap.pm
   - new functions fetch/add/deleteproject_from_project
     which fetch/add/remove MemberProjects from/to table project_membergroups
   - renamed project_groups to project_memberprojects
   - updated manpage of sophomorix-project (--Memberprojects)
   - created Option --MemberProjects (s*-project), does nothing so far
   - remove fields for members, teachers, ... in project_details  
   - when killing a user, delete the user from 
     - secondary group memberships
     - project admin membership
   - handle it to keep users, admins, when --Members are not given
   - Bugfix:uninitialized value: when removing an admin from a project
   - change option --Teachers to admin, change manpage, change help, 
     and variable names
   - renamed memberuid to memberuidnumber
   - added stuff to ad a user as admin into a project
   - added stuff to sophomorix-project to add,change,modify users 
     (--Members name) to a project, i.e. insert/modify/delete 
     the user into groups_users.
     - do nothing in the database and throw an error  if a 
       nonexisting username is given 
   - counting students,teachers,and others when using sophomorix-user -i
   - smbpasswd -w password in sophomorix-setup-pgldap
     - creates random rootdn password
     - or user password given with option ldappw
     (the ldap password is not stored in debconf anymore)
   - added field mailquota
   - added table projects_groups
   - added table projects_admins
   - Windows user Administrator added
   - Windows groupnames without blanks:
     unix-group: non capital letters
     Windows             Linux       unix-id
     ==================================================
     domain:
       Domain Admins       domadmins    gid 512
       Domain Users        domusers     gid 513
       Domain Guests       domguests
       Domain Computers    
       ...
     - this is working now. 
         possibility of user.map-datei refered in smb.conf was dropped
   - sophomorix sees all accounts with NULL sophomorixstatus as
     permanent accounts (i.e. all users added by smbldaptools, ...)


1.4.7-1 (2006-01-29)
   - add users with smbldaptools
   - sophomorix-check treats smbldaptools users as permanent users
   - sophomorix-quota, sophomorix-users throw no errors when 
     empty database-fields are discovered
   - domadmins (unix group)  -> 'Domain Admins' (ntgroup) and others

1.4.6-5 (2006-01-26)

   - added script sophomorix-groupadd to add groups
     - added option to faorce gid
     - limit gid to minimum 200
     - dont ad group if groupname or gidnumber exists alredy  
   - Group "Domain Admins" is created, and gidnumber must be 512


1.4.6 (2005-12-10)

   "Netbios Domain Administrator" is smbroot for now 
    (will probably change to admin)
   
   - sophomorix-add
          - smbroot cannot be created twice 
          - smbroot cannot be created with wrong uidnumber
   - added dependencies in the debian packages to take care that
     sophomorix.conf is installed before sophomorix-setup-pgldap is run
   - put back code into sophomorix-check that converted 1 -> 01 in
     the date. code was accidentally removed when adding 
     date checking with Date::Calc
   - limit rm -rf dir to paths beginning with /home/ when killing users
   - added options smbroot,password to sophomorix-add manpage 
   - Bugfix: loginShell not displayed
   - sophomorix-user displays samba stuff
   - don't show output uid=--- gid=--- in sophomorix-add when 
        uid,gid is not forced from the sophomorix-add file.
   - Differ empty date / year unrealistic / date nonexisting 
     in stdout description and report.office
   - check birthdate for existence with debian package libdate-calc-perl :
       use Date::Calc;
       check_date($year,$month,$day);
     since postgres allows only existing days
   - fixed sophomorix-test to use regex to verify first part (day) 
     of creationdate timestamp
   - added entries in pg_hba.conf
   - checked that: 
     a root script can connect to the database, because it has access 
     via pg_hba.conf and pg_ident.conf

1.4.5-4 (2005-11-29)
   This is the Version tested at the lmz on 2005-11-29    

   - make creationdate a timestamp (datatype: timestamp without time zone)
      like: 2005-11-23 09:44:52.641214
   - adding projects to the database seems to work now
   - modified database for the use of projects
   - dn is updated in the database for existing objects when 
       calling sophomorix-setup-pgldap
   - function show_project_list modified for pgldap



1.4.5 (2005-11-16)

   - Bug: ids (like 10007) in gid (where names are) -> fixed
   - Bugfix: fetch classlist: new function using pg 
   - added replacements for pgldap for:
           groupadd -> create_class_db_entry with second parameter 1 (add subclass)
           adduser  -> pg_adduser
   -  replaced get_group_list (use id) with faster pg_get_group_list(query database)
   - speeded up sophomorix-kill -i accessing pg instead of using id
   - checked that: when killing a user, remove all secondary group memberships
   - show_class_list is deprecated in SophomorixPgLdap.pm
   - function login-type in sophomorix-quota modified for new group-names

   - added options to sophomorix-setup-pgldap: 
           --keep-database 
           --new-database (drops the database and creates an new empty one)
   - added function that exits from script when postgres or
     slapd are not available 
   - view projectdata added

   - view classdata added and checked
   - sophomorix-class displays adminclasses correctly
   - sophomorix-quota
            - is setting quota for admin account on each run correctly
            - does NOT update the database for admin data (admin is in files)


1.4.4 (2005-10-26)
   - package 1.4.4-4 is working on an empty debian system
     (postgres, slapd and samba freshly installed)
   - smbpasswd -w server is setting ldap-password in sophomorix-setup-pgldap
   - modified sophomorix-setup-pgldap to modify
     pg_hba.conf and pg_ident.conf
   - adding a test function to check 
       - if group membership is exactly correct
       - if the collection of links to the exchange directories is correct
   - adding first tests to test directory stucture of a user
     (windows, share, collect, and task)
   - Bugfix in SophomorixBase.pm: using loginname in setup_verzeichnis
     only, when $schueler/$lehrer/$workstation in given in sophomorix.repair 
   - added again info about group in sophomorix-user -s name
   - done a lot in sophomorix quota. sets quota again 
   - uncommented 'checking is user is in system' in sophomorix-user  
   - sophomorix-passwd seems to work now (setting a password of a user)
   - function:  check_sophomorix_user (should work with postgres now)
   - function: backup_user_database (does nothing now)
   - Bugfix: sophomorix-user shows stange errors when webmin is not installed
   - sophomorix-user -s -> search in multiple fields, without doubling
   - get_first_password uses postgres now
   - disable/enable unix-account of a user 
     (append ! to encrypted password/remove ! from encrypted password)
     smbpasswd -e/-d works, use it in scripts.
   - added samba tests
   - /etc/nsswitch.conf: compat ldap for quick logins, when sldap is down
   - checked that bdb package is not needed
   - sophomorix-move: update samba stuff in all relevant places
   - added samba fields for a working login
   - install DB_CONFIG into system, cp at setup to /var/lib/ldap
   - added tests for the correct homedirectory in sophomorix-test 
   - reformatted sophomorix-test output
   - replaced  usermod in sophomorix-move with appropriate stuff, 
     when using pgldap 
   - fixed Bug move old home to new home
   - removed errors from sophomorix-test
   - function update_user_db_entry extended to "Gid=groupname"
   - update gid when moving a user
   - create groups when adding users an group doesn't exist
   - created a salted, crypted userpassword for linux
     (checked that linux login works)
   - linux_gruppe_to_kill in sophomorix-kill is now working
   - checked that View userdata shows gid from primary group
   - moved set_sophomorix-passwd  from SophomorixBase nach Files and Ldap modules
   - wrote new function set_sophomorix-passwd for postgres 
   - print sql commands on console only in logleve 3 (-vv)
   - added a teacher to sophomorix-test
   - sophomorix-test leaves database without modifications (still to test)
   - sophomorix-kill removes users (not homedir)
   - function to killl a user in database and pgldap-module
   - test for Bugfixes:
      - update unid at once, when user reappears with unid
      - delete unid, when user disappears in files or unid is empty   
   - added creation af passwords, still to check, if they work
   - added principal support for samba_sam_account table (fields still empty)
   - delete unid from sys, when entry in files is present, but
     has an empty unid field (test added) 
   - deactivationdate and reactivationdate are emptied
     when not used (NULL)
   - sophomorix-teach-in rewritten to use postgresql
         function get_tech_in-sys-users in SophomorixPgLdap.pm
   - sophomorix-test rewritten to use postgresql
     (130 Tests are OK)
   - sophomorix-add add unid at once, if existent in schueler.txt
   - Replaced/New functions in SophomorixPgLdap.pm
      - connect and disconnect to database
      - create user
      - update user
      - get_sys_users
      - get_print_data
   - use postgresql database instead of files
   - added get_debconf_value to read from the debconf database
   - create packages sophomorix-pgldap and sophomorix-sys-pgldap
   - use module pgldap, when it is set in sophomorix.conf 

   - when a wish-login in lehrer.txt/schueler.txt is given multiple times:
      -> none of the users will be added
      -> error-message 
      -> report.admin entry is created 


1.2.1 (2005-04-08)
   - The following module-names are shown to students,teachers,admin: 
       ml_account  : Benutzerkonto     (alle students)
       ml_teacher  : Unterricht        (all teachers)
       ml_admin    : Administration    (all admins)
   - changed groupname teacher to teachers and /home/reachers
   - changed groupname student to students and /home/students
   - /home/pupil/ -> /home/students 
   - when a user is killed, 
       - move its line(s) from user-modify.log to user-modify-archive.log
          (speed up lookups in user-modify.log)
       - add a kill-entry to the archive to know when a user was killed.
   - history in archive is not sorted according date, it is sorted according users
     (is this fine?)
   - SophomorixBase.pm renamed: append_auto_teach_in_log --> append_teach_in_log
   - sophomorix-user -s string:
     information about webmin-account is displayed 
     (miniserv.users and webmin.acl)
   - sophomorix-add/-kill  call sophomorix-webmin to rewrite the webmin 
     user database (webmin.acl, miniserv.users) 
   - sophomorix-webmin --modules 
     (creates a list of all students/teachers and adds modules from 
      /usr/share/sophomorix/webmin/... to the users) 
   - new option for sophomorix-webmin:
       --loghost 0 / --loghost 1
     (0 makes webmin faster, if DNS is not working)
   - renamed "lehrer" to $DevelConf::teacher (50 times!)
     (seems to work so far)
   - created new file in tmp to pre-filter lehrer.txt:
      /var/lib/sophomorix/tmp/lehrer.txt.tmp
     in wich the grpname lehrer of lehrer.txt is converted to teacher     
   - renamed some files in checkresult:
      user.imsystem        --> sophomorix.system
      report.sekretariat   --> report.office
      report.gesperrt      --> report.filter
      klasse.schuelerzahl  --> AdminClass.students
      extrakurse.schueler  --> extrakurse.students
      schueler.txt.tausch  --> schueler.txt.tmp
   - sophomorix-teacher: --collect added (it worked once)
   - sophomorix-teacher: --handout added (still alpha)
   - no-restart option in sophomorix-webmin added
   - removed option --klassenintern in sophomorix-move 
   - add a user to miniserv.user, when she is added/deleted
   - add/remove a user to webmin.acl when she is added/deleted
   - add a user to webmin.groups when she is created 
     (students and teachers) or when she was created long ago
   - create new users with quota(checked)
   - made sophomorix.conf and sophomorix-devel.conf readable
     for script sophomorix-teacher
   - made tests in sophomorix-developer use the language files as well
   - documented synopsis of SophomorixAPI.pm
   - added various words to the language files
   - creted in /usr/share/sophomorix/lang language files (perl)
   - made a module for configuratuion data SophomorixConfig
   - created function in SophpmorixAPI that returns projects all 
     projects
   - created function in SophpmorixAPI that returns classes that 
     have subclasses
   - sophomorix-split 
     (when classes are split, create tasks and share dirs)
   - moved /home/share/tasks stuff to /home/tasks
     (consistent directory naming)
   - make sophomorix-setup-files create subclass_db
   - updated html-Documentation (some stuff is still missing)
   - sopho-man2html:
       - moved manpages of section 1 to a different directory 
         in the html-documentation
       - included man sophomorix-teacher in the package


1.2.0 (2005-03-09)
   - fixed bugs in sophomorix-test-extra 
   - sophomorix-webmin: added option --auto-logout
   - fixed sopho-man2html: 
         - use man pages of sophomorix-vampire
         - use manpages of scripts with multiple - in their names
   - SophomorixAPI
     - funktion zum schreiben der eingetragenen klassen
     - dito zum lesen, ascibetisch
     - funktion get_all_admin_classes (liest class_db aus)
   - sophomorix-teacher: first release
     adding, removing class from MyAdminClasses
   - sophomorix-webmin: make webmin accessable for every workstation
     /etc/webmin/miniserv.conf
       --all-hosts     
       --localhost     
   - sophomorix-vampire
     - workaround with numerical group id not needed anymore:
        every user and every group gets a new numerical id
     - pushing a vampire key to tho old server works
     - fetching a list of files works
     - adding users works
     - rsync homes works
   - sophomorix-check
     added option --use-uid
     added option --use-gid
     if you want to use the same numerical ids together with 
     --get-info-from-old-files
   - sophomorix-quota
     option --noninteractive added
   - first uncomplete sophomorix-vampire verion
     - distributed in package sophomorix-vampire
     - pushing a key and fetching files
   - Fixed Bug where sophomorix-print generated files in the directory 
     in wich it was called. This made the script abort without producing an error,
     when executed in a nfs mounted read-only filesystem.
   - sophomorix-user -s username
     added options zo the underlying quota command to
       - not show remote filesystems
       - show also unused filesystems
   - rename print-data 
        hinzu.*  -> add.* and others
   - made the database names comply with DBI (sql database table names 
     cannot have a point in them)
     i.e.  user.protokoll -> user_db
           projects.db    -> projects_db
           class.db       -> class_db
           subclasses     -> subclasses_db
   - made the directories under /var/lib/sophomorix international (names)
     i.e.:
      drucken   -> print-data
      pruefen   -> tmp  (because it is created on each run of sophomorix-check)
      dynconfig -> database
      ergebnis  -> check-result
   - added new script sophomorix-class and man page: 
      - -i shows all classes with info
      - --class classname --quota 200+20  sets the quota in database
   - function zeit_stempel: made easier(use ticks), instead of first 
                            writing to a tmp-file and rereading
   - renamed schulinfo.txt to class.db and moved it to the database files
     (renamed again later, see above)     
   - Bugfixes to sophomorix-project: 
         - Don't create links to root
         - Don't add root to unix-group of project
   - complete rewrite of sophomorix-quota to acommodate AddQuota of projects
     (option --sum still missing)
     Quotastring syntax simplified to gain speed:  i.e. 23+45
     (minus sign (-) or x is NOT SUPPORTED ANYMORE)
   - limit sophomorix-quota to (option names as in sophomotix-add) 
       - class(-c), 
       - login ...
       - room
       - ...
   - new function create_userlist($login,$class,$room, ...)
          function can be used in:
               - sophomorix-passwd
               - sophomorix-quota
   - replaced /home/schueler, ... with variables in sophomorix-quota
   - new command sophomorix-passwd (for root)
      - new passwords for all teacher, pupils
      - new password for classes, rooms
      - single users
   - moved all query function of sophomorix-repair to SophomorixAPI and 
     renaming them international
   - added a switch (--no-sync) in sophomorix-check to do/do not an auto-teach-in
   - replacement for sophomorix-teach-in finished
   - show login, admin-class and exit-admin-class when teaching-in
   - include/check new script sophomorix-repair
   - removed variable $samba_dir in repair.directories, ...(not used anymore)
   - The Filesystem under /home is controlled by variables in sophomorix-devel.conf
     repair.directories uses this variable to identify permissions
   - added a few directories under /home/samba
   - sophomorix-setup uses repair.directories to get permissions of directories
   - sophomorix-check with option get-info-from-old-files, that uses data from 
     a previous installation to add users with a former id, gid and login name.
   - option no-kclass disbles removing k from classnames in old group
1.1.6 (2005-01-21)
   - A lot of Bugfixes 

1.1.5 (2005-01-18)
   - First tagged release in the cvs




############################################################
Old obsolete stuff
############################################################




sophomorix-webmin (obsolete in ml 3.0)
   - totally configure webmin
   - option --noninteractive 

   ** ml_account  : Benutzerkonto  (alle user)
   ** ml_teacher  : Unterricht (alle)
   ** ml_admin    : Administration


check: is user taken out of webmin, when she is Disabled? Is this necessary or is the !-sign in /etc/shadow enough?

miniserv.users: letztes Feld : hosts von denen man zugreifen darf 


   -  Be aware: problem group student would need 1 entrys for every student 
       (this will be a very loooooooooong line)

     problem: when a module is added to webmin.users only (own script)
              then this module is NOT added to webmin.acl 
                 -> the user doesnt see this module
           better: create webmin.acl from some configuration files
                   in /usr/sbin (webmin-teacher-modules, ...-admin-, -student-)
                   which can be overwritten by files in /etc/sophomorix/webmin

   - if users are added without webmin installed, root and admin are missing
      - create root,admin, when creating files
      - or better do nothing when they dont exist


   - usermin-modules will be converted to webmin by thomas
       -> usermin is not running on the ml-server
       -> postinstall-script muss sich in gruppe student, teacher eintragen
   -abfrage in sophomorix-webmin, ob paket webmin installiert ist
